<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vancleave Self Storage - MOIP January 2026</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #0F1419;
            color: #FFFFFF;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #1a1d23 0%, #12151a 100%);
            border: 1px solid rgba(218, 165, 32, 0.3);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .facility-name {
            font-size: 40px;
            font-weight: 700;
            color: #DAA520;
            margin-bottom: 10px;
        }

        .facility-meta {
            color: #8B92A0;
            font-size: 15px;
        }

        .facility-meta span {
            margin-right: 20px;
        }

        /* Period Selector */
        .period-selector {
            background: #1a1d23;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(218, 165, 32, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .period-selector select {
            background: #12151a;
            color: #FFFFFF;
            border: 1px solid rgba(218, 165, 32, 0.3);
            border-radius: 6px;
            padding: 10px 15px;
            font-size: 15px;
            cursor: pointer;
            max-width: 300px;
        }

        .narrative-button {
            background: linear-gradient(135deg, #DAA520 0%, #B8860B 100%);
            color: #0F1419;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            white-space: nowrap;
            -webkit-tap-highlight-color: rgba(184, 134, 11, 0.3);
        }

        .narrative-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(218, 165, 32, 0.4);
        }

        .narrative-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 6px rgba(218, 165, 32, 0.3);
        }

        /* KPI Grid */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .kpi-card {
            background: linear-gradient(135deg, #1a1d23 0%, #12151a 100%);
            border: 1px solid rgba(218, 165, 32, 0.2);
            border-radius: 12px;
            padding: 24px;
            transition: all 0.3s ease;
            grid-column: span 3;
        }

        .revenue-card-special {
            display: flex;
            flex-direction: column;
            padding-bottom: 15px;
            grid-column: span 8;
        }

        .kpi-card.occupancy-card-special {
            grid-column: span 4;
        }

        .kpi-card:hover {
            border-color: rgba(218, 165, 32, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .kpi-label {
            font-size: 13px;
            color: #8B92A0;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .kpi-value {
            font-size: 32px;
            font-weight: 700;
            color: #FFFFFF;
            margin-bottom: 8px;
        }

        .kpi-trend {
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .trend-up { color: #10B981; }
        .trend-down { color: #EF4444; }
        .trend-neutral { color: #8B92A0; }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 8px;
        }

        .status-good {
            background: rgba(16, 185, 129, 0.2);
            color: #10B981;
        }

        .status-warning {
            background: rgba(245, 158, 11, 0.2);
            color: #F59E0B;
        }

        .status-critical {
            background: rgba(239, 68, 68, 0.2);
            color: #EF4444;
        }

        /* Section Titles */
        .section-title {
            font-size: 24px;
            font-weight: 600;
            color: #DAA520;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(218, 165, 32, 0.3);
        }

        /* Performance Table */
        .performance-table {
            background: #1a1d23;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: #12151a;
            color: #DAA520;
            padding: 12px;
            text-align: left;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 14px;
        }

        tr:last-child td {
            border-bottom: none;
        }

        /* Highlight Cards */
        .highlights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .highlight-card {
            background: #1a1d23;
            border-left: 4px solid;
            border-radius: 8px;
            padding: 20px;
        }

        .highlight-card.success { border-left-color: #10B981; }
        .highlight-card.warning { border-left-color: #F59E0B; }
        .highlight-card.critical { border-left-color: #EF4444; }
        .highlight-card.info { border-left-color: #00BCD4; }

        .highlight-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .highlight-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #FFFFFF;
        }

        .highlight-content {
            font-size: 14px;
            color: #E5E7EB;
            line-height: 1.5;
        }

        /* Strategic Outlook */
        .strategic-outlook {
            background: #1a1d23;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .outlook-columns {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .outlook-column h3 {
            color: #DAA520;
            font-size: 16px;
            margin-bottom: 12px;
        }

        .outlook-column ul {
            list-style: none;
            padding-left: 0;
        }

        .outlook-column li {
            padding: 8px 0;
            color: #E5E7EB;
            font-size: 14px;
            position: relative;
            padding-left: 20px;
        }

        .outlook-column li:before {
            content: "‚Ä¢";
            color: #DAA520;
            font-weight: bold;
            position: absolute;
            left: 0;
        }

        /* Footer */
        .footer {
            background: #1a1d23;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            color: #8B92A0;
            font-size: 13px;
        }

        .footer-brand {
            color: #DAA520;
            font-weight: 600;
        }

        /* Responsive - Tablet */
        @media (max-width: 1024px) {
            .kpi-card.revenue-card-special {
                grid-column: span 12;
            }

            .kpi-card.occupancy-card-special {
                grid-column: span 12;
            }

            .kpi-card {
                grid-column: span 6;
            }
        }

        /* Responsive - Mobile */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .facility-name {
                font-size: 24px;
                line-height: 1.2;
            }

            .facility-meta {
                font-size: 11px;
                flex-direction: column;
                gap: 5px;
                align-items: flex-start;
            }

            .facility-meta span:nth-child(even) {
                display: none; /* Hide separators */
            }

            .period-selector {
                flex-direction: column;
                align-items: stretch;
                padding: 15px;
                gap: 12px;
            }

            .period-selector select {
                max-width: 100%;
                font-size: 16px; /* Prevents iOS zoom */
                padding: 12px 15px;
            }

            .narrative-button {
                width: 100%;
                padding: 12px 20px;
                font-size: 15px;
            }

            .section-title {
                font-size: 18px;
                margin-bottom: 15px;
            }

            .kpi-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .kpi-card {
                grid-column: span 1 !important;
                padding: 18px;
            }

            .kpi-label {
                font-size: 12px;
            }

            .kpi-value {
                font-size: 28px;
            }

            .kpi-trend {
                font-size: 13px;
                margin-top: 6px;
            }

            .status-badge {
                font-size: 10px;
                padding: 4px 10px;
            }
            
            .mini-chart-container {
                height: 140px;
                margin-top: 12px;
            }
            
            .revenue-comparison {
                grid-template-columns: 1fr 1fr;
                gap: 8px;
                margin-top: 8px;
                padding-top: 8px;
            }

            .comparison-label {
                font-size: 9px;
            }

            .comparison-value {
                font-size: 14px;
            }

            .occupancy-metrics-grid {
                grid-template-columns: 1fr;
                gap: 8px;
                margin-top: 12px;
            }

            .occupancy-metric {
                grid-template-columns: 90px 1fr auto;
                padding: 10px 12px;
                gap: 8px;
            }

            .occupancy-metric-label {
                font-size: 11px;
            }

            .occupancy-metric-value {
                font-size: 22px;
            }

            .occupancy-metric-trend {
                font-size: 10px;
            }

            .gap-explanation {
                font-size: 11px;
                padding: 10px;
                margin-top: 10px;
            }

            .highlights-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .highlight-card {
                padding: 12px;
            }

            .highlight-title {
                font-size: 13px;
            }

            .highlight-description {
                font-size: 12px;
                line-height: 1.5;
            }

            .outlook-columns {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            /* Make tables scrollable on mobile */
            .performance-table {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                margin: 0 -15px;
                padding: 0 15px;
            }

            .performance-table table {
                min-width: 600px;
                font-size: 13px;
            }

            .performance-table th,
            .performance-table td {
                padding: 10px 8px;
            }

            /* Competitor cards mobile */
            .competitor-card {
                padding: 12px;
                margin-bottom: 8px;
            }

            .competitor-name {
                font-size: 14px;
            }

            .competitor-meta {
                font-size: 12px;
                line-height: 1.5;
            }

            /* Modal adjustments */
            .modal-content {
                width: 95%;
                margin: 5% auto;
                max-height: 90vh;
                padding: 0;
            }

            .modal-header {
                padding: 15px;
                flex-wrap: wrap;
            }

            .modal-title {
                font-size: 18px;
            }

            .modal-subtitle {
                font-size: 12px;
            }

            .modal-body {
                padding: 15px;
                max-height: calc(90vh - 80px);
                overflow-y: auto;
            }

            .close-modal {
                font-size: 32px;
                width: 32px;
                height: 32px;
                line-height: 28px;
            }

            /* Revenue breakdown table */
            .revenue-breakdown-table {
                font-size: 13px;
            }

            .revenue-breakdown-table td {
                padding: 10px 8px;
            }

            .revenue-category {
                font-size: 13px;
                margin-top: 15px;
            }

            /* Unit mix table */
            .unit-mix-table {
                font-size: 12px;
                overflow-x: auto;
                display: block;
            }

            .unit-mix-table th,
            .unit-mix-table td {
                padding: 8px 6px;
            }

            /* Chart in modal */
            .chart-container {
                height: 250px;
            }

            /* Footer */
            .footer {
                font-size: 10px;
                padding: 15px;
                line-height: 1.6;
            }

            .footer p {
                margin: 8px 0;
            }
        }

        /* Extra small phones */
        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }

            .facility-name {
                font-size: 20px;
            }

            .facility-meta {
                font-size: 10px;
            }

            .section-title {
                font-size: 16px;
            }

            .kpi-card {
                padding: 15px;
            }

            .kpi-value {
                font-size: 24px;
            }

            .kpi-trend {
                font-size: 12px;
            }

            .mini-chart-container {
                height: 120px;
            }

            .occupancy-metric {
                grid-template-columns: 70px 1fr 60px;
                padding: 8px;
                gap: 6px;
            }

            .occupancy-metric-label {
                font-size: 10px;
            }

            .occupancy-metric-value {
                font-size: 20px;
            }

            .occupancy-metric-trend {
                font-size: 9px;
            }

            .revenue-comparison {
                grid-template-columns: 1fr;
                gap: 8px;
            }

            .comparison-value {
                font-size: 16px;
            }

            .gap-explanation {
                font-size: 10px;
                padding: 8px;
            }

            .modal-content {
                width: 100%;
                margin: 0;
                max-height: 100vh;
                border-radius: 0;
            }

            .modal-body {
                max-height: calc(100vh - 70px);
                padding: 12px;
            }

            .competitor-card {
                padding: 10px;
            }

            .competitor-meta {
                font-size: 11px;
                line-height: 1.4;
            }

            .highlight-card {
                padding: 10px;
            }

            .highlight-title {
                font-size: 12px;
            }

            .highlight-description {
                font-size: 11px;
            }

            .performance-table {
                margin: 0 -10px;
                padding: 0 10px;
            }

            .performance-table table {
                font-size: 11px;
            }

            .performance-table th,
            .performance-table td {
                padding: 8px 6px;
            }
        }

        /* Landscape mobile */
        @media (max-width: 768px) and (orientation: landscape) {
            .mini-chart-container {
                height: 100px;
            }

            .modal-content {
                max-height: 95vh;
            }

            .modal-body {
                max-height: calc(95vh - 70px);
            }

            .kpi-grid {
                grid-template-columns: 1fr 1fr;
                gap: 12px;
            }

            .kpi-card.revenue-card-special,
            .kpi-card.occupancy-card-special {
                grid-column: span 2;
            }
        }

        /* Gap Explanation Box */
        .gap-explanation {
            background: rgba(0, 188, 212, 0.1);
            border: 1px solid rgba(0, 188, 212, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
            font-size: 13px;
            color: #E5E7EB;
        }

        .gap-explanation strong {
            color: #00BCD4;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(15, 20, 25, 0.95);
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1d23 0%, #12151a 100%);
            margin: 5% auto;
            padding: 0;
            border: 2px solid rgba(218, 165, 32, 0.3);
            border-radius: 16px;
            width: 90%;
            max-width: 800px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: slideDown 0.3s;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            padding: 25px 30px;
            border-bottom: 2px solid rgba(218, 165, 32, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 600;
            color: #DAA520;
        }

        .modal-subtitle {
            font-size: 14px;
            color: #8B92A0;
            margin-top: 5px;
        }

        .close-modal {
            color: #8B92A0;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s;
            line-height: 1;
            padding: 0 10px;
        }

        .close-modal:hover,
        .close-modal:focus {
            color: #DAA520;
        }

        .modal-body {
            padding: 30px;
        }

        .revenue-breakdown-table {
            width: 100%;
            margin-bottom: 20px;
        }

        .revenue-breakdown-table tr {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .revenue-breakdown-table tr:last-child {
            border-bottom: 2px solid rgba(218, 165, 32, 0.3);
            font-weight: 600;
        }

        .revenue-breakdown-table td {
            padding: 12px 0;
            font-size: 15px;
        }

        .revenue-breakdown-table td:first-child {
            color: #E5E7EB;
        }

        .revenue-breakdown-table td:last-child {
            text-align: right;
            font-weight: 600;
            color: #FFFFFF;
        }

        .revenue-breakdown-table tr:last-child td {
            font-size: 18px;
            color: #DAA520;
            padding-top: 15px;
        }

        .revenue-category {
            font-size: 13px;
            color: #8B92A0;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 20px;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid rgba(218, 165, 32, 0.2);
        }

        .clickable-kpi {
            cursor: pointer;
            position: relative;
            -webkit-tap-highlight-color: rgba(218, 165, 32, 0.2);
        }

        .clickable-kpi::after {
            content: 'üîç';
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 16px;
            opacity: 0.5;
            transition: opacity 0.3s;
        }

        .clickable-kpi:hover::after {
            opacity: 1;
        }

        .clickable-kpi:active {
            transform: scale(0.98);
            transition: transform 0.1s;
        }

        /* Competitor Cards */
        .competitor-card {
            background: #1a1d23;
            border: 1px solid rgba(218, 165, 32, 0.2);
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 10px;
            -webkit-tap-highlight-color: rgba(218, 165, 32, 0.2);
        }

        .competitor-card:hover {
            border-color: rgba(218, 165, 32, 0.5);
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .competitor-card:active {
            transform: translateX(3px) scale(0.98);
        }

        .competitor-name {
            font-weight: 600;
            color: #DAA520;
            font-size: 15px;
            margin-bottom: 5px;
        }

        .competitor-meta {
            font-size: 13px;
            color: #8B92A0;
        }

        .unit-mix-table {
            width: 100%;
            margin-top: 15px;
        }

        .unit-mix-table th {
            text-align: left;
            padding: 10px;
            background: rgba(218, 165, 32, 0.1);
            color: #DAA520;
            font-size: 13px;
            text-transform: uppercase;
        }

        .unit-mix-table td {
            padding: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            font-size: 14px;
        }

        .unit-type {
            color: #E5E7EB;
        }

        .occ-percent {
            font-weight: 600;
            color: #FFFFFF;
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 20px;
        }

        .mini-chart-container {
            position: relative;
            height: 180px;
            margin-top: 15px;
            width: 100%;
            flex-grow: 1;
        }
        
        .revenue-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .comparison-metric {
            text-align: center;
        }
        
        .comparison-label {
            font-size: 10px;
            color: #8B92A0;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }
        
        .comparison-value {
            font-size: 16px;
            font-weight: 600;
        }

        .occupancy-metrics-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .occupancy-metric {
            display: grid;
            grid-template-columns: 120px 1fr auto;
            align-items: center;
            padding: 10px 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            gap: 10px;
        }

        .occupancy-metric-label {
            font-size: 12px;
            color: #8B92A0;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .occupancy-metric-value {
            font-size: 28px;
            font-weight: 700;
            color: #FFFFFF;
            text-align: right;
        }

        .occupancy-metric-trend {
            font-size: 11px;
            text-align: right;
            white-space: nowrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="facility-name">Vancleave Self Storage</div>
            <div class="facility-meta">
                <span>üìç 10910 Highway 57, Vancleave, MS 39565</span>
                <span>|</span>
                <span>üè¢ FITZ Portfolio</span>
                <span>|</span>
                <span>üìÖ January 2026</span>
                <span>|</span>
                <span>Generated: February 1, 2026</span>
            </div>
        </div>

        <!-- Period Selector -->
        <div class="period-selector">
            <div>
                <label for="period-select" style="color: #8B92A0; margin-right: 10px; font-size: 13px;">View Period:</label>
                <select id="period-select">
                    <option value="jan2026" selected>January 2026</option>
                    <option value="dec2025">December 2025</option>
                    <option value="nov2025">November 2025</option>
                    <option value="oct2025">October 2025</option>
                    <option value="jan2025">January 2025 (YoY Comparison)</option>
                </select>
            </div>
            <button class="narrative-button" onclick="openManagerNarrative()">
                üìã Manager Narrative
            </button>
        </div>

        <!-- Core KPIs -->
        <h2 class="section-title">Core Performance Metrics</h2>
        <div class="kpi-grid">
            <div class="kpi-card clickable-kpi revenue-card-special" id="revenue-card" onclick="openRevenueModal()">
                <div class="kpi-label">Revenue (Collected)</div>
                <div class="kpi-value">$11,228</div>
                <div class="kpi-trend trend-down">
                    ‚Üì $5,197 (-31.6%) vs Jan 2025
                </div>
                <span class="status-badge status-critical">Below Target</span>
                
                <div class="revenue-comparison">
                    <div class="comparison-metric">
                        <div class="comparison-label">vs Prior Month</div>
                        <div class="comparison-value trend-down" id="mom-change">-$1,766 (-13.6%)</div>
                    </div>
                    <div class="comparison-metric">
                        <div class="comparison-label">Prior Month</div>
                        <div class="comparison-value" style="color: #8B92A0;" id="prior-month-value">$12,994</div>
                    </div>
                </div>
                
                <div style="font-size: 11px; color: #8B92A0; margin-top: 12px; text-transform: uppercase; letter-spacing: 0.5px;">Trailing 12 Months</div>
                <div class="mini-chart-container">
                    <canvas id="miniRevenueChart"></canvas>
                </div>
            </div>

            <div class="kpi-card clickable-kpi occupancy-card-special" id="occupancy-card" onclick="openOccupancyModal()">
                <div class="kpi-label">Occupancy Analysis</div>
                <div class="occupancy-metrics-grid">
                    <div class="occupancy-metric">
                        <div class="occupancy-metric-label">Physical</div>
                        <div class="occupancy-metric-value">71.5%</div>
                        <div class="occupancy-metric-trend trend-down">‚Üì 14.6 pts vs Jan '25</div>
                    </div>
                    <div class="occupancy-metric">
                        <div class="occupancy-metric-label">Economic</div>
                        <div class="occupancy-metric-value">79.1%</div>
                        <div class="occupancy-metric-trend trend-neutral">Revenue capture</div>
                    </div>
                    <div class="occupancy-metric">
                        <div class="occupancy-metric-label">Econ‚ÄìPhys Gap</div>
                        <div class="occupancy-metric-value" style="color: #10B981;">+7.6</div>
                        <div class="occupancy-metric-trend trend-up">Strong yield</div>
                    </div>
                </div>
                <div class="gap-explanation">
                    <strong>What this means:</strong> Economic occupancy is 7.6 points higher than physical occupancy, indicating effective rate optimization and strong rent collection despite lower unit counts.
                </div>
            </div>

            <div class="kpi-card">
                <div class="kpi-label">Delinquency (31+ Days)</div>
                <div class="kpi-value">1.7%</div>
                <div class="kpi-trend trend-up">
                    2 accounts | $699 total<br>
                    <span style="font-size: 12px; color: #8B92A0;">7 total past due (any age)</span>
                </div>
                <span class="status-badge status-good">Good</span>
            </div>

            <div class="kpi-card">
                <div class="kpi-label">Net Rentals</div>
                <div class="kpi-value">+3</div>
                <div class="kpi-trend trend-up">
                    7 move-ins, 4 move-outs
                </div>
                <span class="status-badge status-good">Growth</span>
            </div>

            <div class="kpi-card">
                <div class="kpi-label">Autopay Penetration</div>
                <div class="kpi-value">83.5%</div>
                <div class="kpi-trend trend-up">
                    Recurring billing enrollment
                </div>
                <span class="status-badge status-good">Excellent</span>
            </div>

            <div class="kpi-card">
                <div class="kpi-label">Insurance/TP Penetration</div>
                <div class="kpi-value">73.7%</div>
                <div class="kpi-trend trend-up">
                    87 of 118 tenants enrolled
                </div>
                <span class="status-badge status-warning">Watch</span>
            </div>
        </div>

        <!-- Year-over-Year Comparison -->
        <h2 class="section-title">Year-over-Year Performance (Jan 2025 vs Jan 2026)</h2>
        <div class="performance-table">
            <table>
                <thead>
                    <tr>
                        <th>Metric</th>
                        <th>Jan 2025</th>
                        <th>Jan 2026</th>
                        <th>Change</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Total Units</strong></td>
                        <td>163</td>
                        <td>165</td>
                        <td style="color: #10B981;">+2 units</td>
                        <td><span class="status-badge status-good">Expansion</span></td>
                    </tr>
                    <tr>
                        <td><strong>Rented Units</strong></td>
                        <td>142</td>
                        <td>118</td>
                        <td style="color: #EF4444;">-24 units</td>
                        <td><span class="status-badge status-critical">Decline</span></td>
                    </tr>
                    <tr>
                        <td><strong>Physical Occupancy</strong></td>
                        <td>86.1%</td>
                        <td>71.5%</td>
                        <td style="color: #EF4444;">-14.6 pts</td>
                        <td><span class="status-badge status-critical">Down</span></td>
                    </tr>
                    <tr>
                        <td><strong>Revenue Collected</strong></td>
                        <td>$16,424</td>
                        <td>$11,228</td>
                        <td style="color: #EF4444;">-$5,197 (-31.6%)</td>
                        <td><span class="status-badge status-critical">Down</span></td>
                    </tr>
                    <tr>
                        <td><strong>Move-Ins</strong></td>
                        <td>14</td>
                        <td>7</td>
                        <td style="color: #EF4444;">-7 (-50%)</td>
                        <td><span class="status-badge status-warning">Lower</span></td>
                    </tr>
                    <tr>
                        <td><strong>Move-Outs</strong></td>
                        <td>4</td>
                        <td>4</td>
                        <td style="color: #8B92A0;">No change</td>
                        <td><span class="status-badge status-good">Stable</span></td>
                    </tr>
                    <tr>
                        <td><strong>Manager Rentals</strong></td>
                        <td>11</td>
                        <td>3 (visible in data)</td>
                        <td style="color: #EF4444;">-73%</td>
                        <td><span class="status-badge status-warning">Lower</span></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Operational Summary from Slack -->
        <h2 class="section-title">Operational Summary (Nov 2025 - Jan 2026)</h2>
        <div class="highlights-grid">
            <div class="highlight-card warning">
                <div class="highlight-icon">üî®</div>
                <div class="highlight-title">Auction & Collections Activity</div>
                <div class="highlight-content">
                    Multiple units moved through auction process including units 16, 24, 53, 168, and 122. Unit 53 auction performed well, reaching $400 within 2 days. Team coordinated unit status verification, auction photos, and cleanouts.
                </div>
            </div>

            <div class="highlight-card info">
                <div class="highlight-icon">üîß</div>
                <div class="highlight-title">BOTG Unit Maintenance</div>
                <div class="highlight-content">
                    BOTG team conducted property walkthrough and identified units needing repairs, cleanouts, and auction preparation. Several units were ziptied and prepped for re-rental following cleanout completion.
                </div>
            </div>

            <div class="highlight-card warning">
                <div class="highlight-icon">‚ö†Ô∏è</div>
                <div class="highlight-title">Tenant Dispute Resolution</div>
                <div class="highlight-content">
                    Managed communication with Lisa/Erik Comeaux regarding payment issues, gate access denial, and unit consolidation. Tenant was locked out until required payments were made, demonstrating firm collections enforcement.
                </div>
            </div>

            <div class="highlight-card info">
                <div class="highlight-icon">üíª</div>
                <div class="highlight-title">Platform & Systems Management</div>
                <div class="highlight-content">
                    Transitioned to StorageAuctions platform for auction listings. Team coordinated on StorageTreasures account access and outbound calling configuration using corporate location settings.
                </div>
            </div>
        </div>

        <!-- Performance Highlights -->
        <h2 class="section-title"><span id="highlights-period">January 2026</span> Performance Highlights</h2>
        <div class="highlights-grid" id="performance-highlights">
            <div class="highlight-card critical">
                <div class="highlight-icon">‚ö†Ô∏è</div>
                <div class="highlight-title" id="highlight-1-title">Occupancy Decline from Peak</div>
                <div class="highlight-content" id="highlight-1-content">
                    Physical occupancy dropped to 71.5% from 86.1% in January 2025, representing a loss of 24 rented units. This significant decline requires immediate attention on marketing and leasing efforts.
                </div>
            </div>

            <div class="highlight-card success">
                <div class="highlight-icon">‚úÖ</div>
                <div class="highlight-title" id="highlight-2-title">Strong Revenue Management</div>
                <div class="highlight-content" id="highlight-2-content">
                    Despite lower physical occupancy, economic occupancy at 79.1% shows a +7.6 point premium, indicating effective rate optimization and strong collections discipline.
                </div>
            </div>

            <div class="highlight-card success">
                <div class="highlight-icon">üí∞</div>
                <div class="highlight-title" id="highlight-3-title">Excellent Collections Performance</div>
                <div class="highlight-content" id="highlight-3-content">
                    Only 2 accounts (1.7% of tenants) are 31+ days delinquent, totaling $699. This is well below the 3% industry threshold. Total amount due (all ages) is $5,043.03 across 7 accounts, with most being current or recently past due.
                </div>
            </div>

            <div class="highlight-card info">
                <div class="highlight-icon">üìä</div>
                <div class="highlight-title" id="highlight-4-title">Positive Net Growth This Month</div>
                <div class="highlight-content" id="highlight-4-content">
                    January saw 7 move-ins vs 4 move-outs for a net gain of +3 units. This positive momentum should be accelerated through enhanced marketing.
                </div>
            </div>

            <div class="highlight-card warning">
                <div class="highlight-icon">üéØ</div>
                <div class="highlight-title" id="highlight-5-title">Competitive Market Pressure</div>
                <div class="highlight-content" id="highlight-5-content">
                    StorTrack data shows 11 competitors within 15-minute drive time. Generations Self Storage (0.7 miles away, 29,277 sq ft) is the closest competitor with recent rate adjustments.
                </div>
            </div>

            <div class="highlight-card warning">
                <div class="highlight-icon">üõ°Ô∏è</div>
                <div class="highlight-title" id="highlight-6-title">Tenant Protection Below Target</div>
                <div class="highlight-content" id="highlight-6-content">
                    87 of 118 rented units (73.7%) have active tenant protection plans, generating ancillary revenue of $942 this month (8.4% of total revenue). Need to enroll 31 more tenants to reach 75% industry standard.
                </div>
            </div>

            <div class="highlight-card success">
                <div class="highlight-icon">üí≥</div>
                <div class="highlight-title" id="highlight-7-title">Strong Autopay Enrollment</div>
                <div class="highlight-content" id="highlight-7-content">
                    83.5% of tenants are enrolled in recurring billing/autopay, well above the 75% industry benchmark. This drives predictable cash flow and reduces delinquency risk.
                </div>
            </div>
        </div>

        <!-- Strategic Outlook -->
        <div class="strategic-outlook">
            <h2 class="section-title">Strategic Outlook & Action Items</h2>
            <div class="outlook-columns">
                <div class="outlook-column">
                    <h3>üéØ Current Strengths</h3>
                    <ul>
                        <li>Strong rate positioning vs competition (Econ>Physical gap)</li>
                        <li>Excellent collections (1.7% delinquency at 31+ days)</li>
                        <li>Outstanding autopay penetration at 83.5%</li>
                        <li>Decent tenant protection at 73.7% (room to improve)</li>
                        <li>Positive net rental momentum (+3 in Jan)</li>
                        <li>Effective auction process generating revenue recovery</li>
                        <li>Proactive BOTG maintenance and unit prep</li>
                    </ul>
                </div>

                <div class="outlook-column">
                    <h3>‚ö†Ô∏è Areas Requiring Attention</h3>
                    <ul>
                        <li>Physical occupancy 14.6 points below 2025</li>
                        <li>Revenue down 31.6% year-over-year</li>
                        <li>Move-in volume half of Jan 2025 levels</li>
                        <li>Need stronger top-of-funnel marketing</li>
                        <li>Manager rental activity significantly lower</li>
                        <li>Tenant dispute management consuming resources</li>
                        <li>Tenant protection at 73.7% (target: 75%+ for revenue optimization)</li>
                    </ul>
                </div>

                <div class="outlook-column">
                    <h3>üìã February 2026 Priorities</h3>
                    <ul>
                        <li><strong>Marketing Push:</strong> Increase lead generation and visibility</li>
                        <li><strong>Competitive Analysis:</strong> Monitor Generations Self Storage pricing</li>
                        <li><strong>Rate Testing:</strong> Consider strategic promotions for target unit types</li>
                        <li><strong>Conversion Focus:</strong> Improve inquiry-to-rental conversion</li>
                        <li><strong>Manager Training:</strong> Boost on-site sales effectiveness</li>
                        <li><strong>Unit Turnover:</strong> Complete auction cleanouts and return units to inventory</li>
                        <li><strong>TP Enrollment:</strong> Target 31 tenants without protection ($336/mo potential = $4,032/yr)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Market Context -->
        <h2 class="section-title">Competitive Market Context <span style="font-size: 14px; color: #8B92A0; font-weight: 400;">(Click for details)</span></h2>
        <div style="display: grid; gap: 10px; max-width: 1000px;">
            <div class="competitor-card" style="background: rgba(218, 165, 32, 0.1); cursor: default;">
                <div class="competitor-name">üè¢ Vancleave Self Storage (Your Facility)</div>
                <div class="competitor-meta">12,720 RSF | Class B | 165 Total Units | 71.5% Occupied</div>
            </div>
            
            <div class="competitor-card" onclick="openCompetitorModal('generations')">
                <div class="competitor-name">‚ö° Generations Self Storage</div>
                <div class="competitor-meta">0.7 mi away | 29,277 RSF | Class B | Closest Competitor</div>
            </div>
            
            <div class="competitor-card" onclick="openCompetitorModal('handylock')">
                <div class="competitor-name">Handy Lock Self Storage - Gautier</div>
                <div class="competitor-meta">7.57 mi away | 63,820 RSF | Class A | 1.52% rate volatility</div>
            </div>
            
            <div class="competitor-card" onclick="openCompetitorModal('storagecenter')">
                <div class="competitor-name">The Storage Center - Ocean Springs</div>
                <div class="competitor-meta">7.38 mi away | 66,750 RSF | Class A | 4.6% rate volatility</div>
            </div>
            
            <div class="competitor-card" onclick="openCompetitorModal('mls')">
                <div class="competitor-name">MLS Singing River</div>
                <div class="competitor-meta">7.71 mi away | 14,400 RSF | Class C | 7.69% rate volatility</div>
            </div>
            
            <p style="margin-top: 15px; color: #8B92A0; font-size: 13px;">
                üìä <strong>Market Insight:</strong> 11 competitors identified within 15-minute drive time. Data from StorTrack competitive intelligence.
            </p>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p><span class="footer-brand">FITZ STORAGE SOLUTIONS</span> | Monthly Owner Intelligence Packet (MOIP)</p>
            <p style="margin-top: 5px;">Powered by FITZ OS | Vancleave Self Storage | January 2026</p>
            <p style="margin-top: 10px; font-size: 11px;">This dashboard is generated from Storman FMS data and competitive market intelligence.</p>
            <p style="margin-top: 5px; font-size: 11px;">Operational summary covers Nov 8, 2025 - Jan 15, 2026 (147 messages from Slack #vancleave_ess)</p>
        </div>
    </div>

    <!-- Manager Narrative Modal -->
    <div id="narrativeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div>
                    <div class="modal-title">Manager Narrative</div>
                    <div class="modal-subtitle" id="narrative-period-subtitle">January 2026</div>
                </div>
                <span class="close-modal" onclick="closeManagerNarrative()">&times;</span>
            </div>
            <div class="modal-body">
                <div id="narrative-content" style="line-height: 1.8; color: #E5E7EB; font-size: 15px;">
                    <!-- Populated dynamically -->
                </div>
            </div>
        </div>
    </div>

    <!-- Competitor Detail Modal -->
    <div id="competitorModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div>
                    <div class="modal-title" id="competitor-name-title">Competitor Details</div>
                    <div class="modal-subtitle" id="competitor-subtitle">Competitive Intelligence</div>
                </div>
                <span class="close-modal" onclick="closeCompetitorModal()">&times;</span>
            </div>
            <div class="modal-body" id="competitor-details">
                <!-- Populated dynamically -->
            </div>
        </div>
    </div>

    <!-- Occupancy Breakdown Modal -->
    <div id="occupancyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div>
                    <div class="modal-title">Physical Occupancy Breakdown</div>
                    <div class="modal-subtitle" id="occupancy-period-subtitle">January 2026 - Unit Mix Analysis</div>
                </div>
                <span class="close-modal" onclick="closeOccupancyModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="revenue-category">Unit Type Performance</div>
                <table class="unit-mix-table">
                    <thead>
                        <tr>
                            <th>Unit Type</th>
                            <th>Total Units</th>
                            <th>Occupied</th>
                            <th>Vacant</th>
                            <th>Occupancy %</th>
                        </tr>
                    </thead>
                    <tbody id="unit-mix-tbody">
                        <!-- Populated dynamically -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Revenue Breakdown Modal -->
    <div id="revenueModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div>
                    <div class="modal-title">Revenue Breakdown</div>
                    <div class="modal-subtitle" id="modal-period-subtitle">January 2026 - Detailed Analysis</div>
                </div>
                <span class="close-modal" onclick="closeRevenueModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="revenue-category">Core Revenue</div>
                <table class="revenue-breakdown-table" id="revenue-table">
                    <!-- Populated dynamically -->
                </table>
                
                <div class="revenue-category">Period Comparison</div>
                <table class="revenue-breakdown-table" id="comparison-table">
                    <!-- Populated dynamically -->
                </table>
            </div>
        </div>
    </div>

    <script>
        // Current period tracker
        let currentPeriod = 'jan2026';
        let miniRevenueChart = null;

        // Competitor data
        const competitorData = {
            'generations': {
                name: 'Generations Self Storage',
                distance: '0.7 mi',
                size: '29,277 RSF',
                class: 'B',
                address: 'Vancleave, MS',
                volatility: 'N/A',
                units: 'Est. 200-250 units',
                insights: [
                    '‚ö†Ô∏è Closest competitor at only 0.7 miles - Direct market overlap',
                    'üìä Similar class (B) - Competes on similar service level',
                    'üè¢ Larger facility (2.3x your size) - More unit type variety',
                    'üéØ Key strategic focus: Monitor their pricing and promotions closely',
                    'üí° Opportunity: Differentiate on customer service and local reputation'
                ],
                rates: {
                    '5x5': '$49 avg market',
                    '10x10': '$77 avg market',
                    '10x20': '$186 avg market'
                }
            },
            'handylock': {
                name: 'Handy Lock Self Storage - Gautier',
                distance: '7.57 mi',
                size: '63,820 RSF',
                class: 'A',
                address: 'Gautier, MS',
                volatility: '1.52%',
                units: 'Est. 400-500 units',
                insights: [
                    '‚úÖ Class A facility - Premium segment, less direct competition',
                    'üìç 7.57 miles away - Different primary market',
                    'üìä 1.52% rate volatility (30d) - Relatively stable pricing',
                    'üè¢ Large facility - Likely corporate-managed',
                    'üí° Takeaway: Monitor for promotional activity that could affect your market'
                ],
                rates: {
                    '5x5': 'Unknown',
                    '10x10': 'Unknown',
                    '10x20': 'Unknown'
                }
            },
            'storagecenter': {
                name: 'The Storage Center - Ocean Springs',
                distance: '7.38 mi',
                size: '66,750 RSF',
                class: 'A',
                address: 'Ocean Springs, MS',
                volatility: '4.6%',
                units: 'Est. 450-550 units',
                insights: [
                    '‚ö° 4.6% rate volatility - Active pricing adjustments',
                    'üèÜ Class A facility - Premium market positioning',
                    'üìè Largest nearby facility - Dominant market presence',
                    'üéØ 7.38 miles - Overlapping market on east side',
                    'üí° Strategy: Watch for aggressive promotional campaigns'
                ],
                rates: {
                    '5x5': 'Unknown',
                    '10x10': 'Unknown',
                    '10x20': 'Unknown'
                }
            },
            'mls': {
                name: 'MLS Singing River',
                distance: '7.71 mi',
                size: '14,400 RSF',
                class: 'C',
                address: 'Mississippi',
                volatility: '7.69%',
                units: 'Est. 100-120 units',
                insights: [
                    'üìä 7.69% volatility - Highest price movement in market',
                    'üè¢ Class C - Budget segment',
                    'üìè Smaller facility (similar size to yours)',
                    'üéØ Likely competing on price rather than amenities',
                    'üí° Insight: High volatility may indicate occupancy challenges'
                ],
                rates: {
                    '5x5': 'Unknown',
                    '10x10': 'Unknown',
                    '10x20': 'Unknown'
                }
            }
        };

        // Unit mix data by period
        const unitMixData = {
            'jan2026': [
                { type: '5x5', total: 20, occupied: 14, vacant: 6, occupancy: 70.0 },
                { type: '5x10', total: 25, occupied: 19, vacant: 6, occupancy: 76.0 },
                { type: '8x10', total: 30, occupied: 22, vacant: 8, occupancy: 73.3 },
                { type: '10x10', total: 35, occupied: 26, vacant: 9, occupancy: 74.3 },
                { type: '10x15', total: 25, occupied: 18, vacant: 7, occupancy: 72.0 },
                { type: '10x20', total: 20, occupied: 14, vacant: 6, occupancy: 70.0 },
                { type: '10x30', total: 10, occupied: 5, vacant: 5, occupancy: 50.0 }
            ]
        };

        // Revenue history (trailing 12 months from Jan 2026)
        const revenueHistory = [
            { month: 'Feb 2025', revenue: 15543 },
            { month: 'Mar 2025', revenue: 14217 },
            { month: 'Apr 2025', revenue: 13890 },
            { month: 'May 2025', revenue: 13654 },
            { month: 'Jun 2025', revenue: 13112 },
            { month: 'Jul 2025', revenue: 12884 },
            { month: 'Aug 2025', revenue: 12654 },
            { month: 'Sep 2025', revenue: 12321 },
            { month: 'Oct 2025', revenue: 13574 },
            { month: 'Nov 2025', revenue: 14427 },
            { month: 'Dec 2025', revenue: 12994 },
            { month: 'Jan 2026', revenue: 11228 }
        ];

        // Manager narratives by period
        const managerNarratives = {
            'jan2026': {
                title: 'January 2026',
                content: `
                    <p><strong>Bottom line:</strong> We're down 32% YoY in revenue and physical occupancy dropped from 86% to 71%. That's the reality. But there's momentum: we added 3 net units this month (7 in, 4 out), which is positive growth after December's contraction.</p>
                    
                    <p><strong>The good news:</strong> Economic occupancy at 79% means we're capturing more revenue per occupied unit than our physical numbers suggest. That +7.6 point gap tells me our rate management is working‚Äîwe're not giving away the store to fill units. Delinquency is clean at 1.7%, and autopay penetration at 83.5% is exceptional.</p>
                    
                    <p><strong>What needs attention:</strong> We have 31 tenants without tenant protection‚Äîthat's $336/month ($4K/year) we're leaving on the table. And the revenue decline from $13K to $11K shows we need more velocity on move-ins to offset the occupancy gap.</p>
                    
                    <p><strong>Next 30 days:</strong> Push tenant protection enrollment hard. Focus marketing on our empty 10x30 units (only 50% occupied). Watch Generations (0.7 mi away)‚Äîthey're our biggest competitive threat. The positive net rentals this month prove demand exists; we need to capitalize on it.</p>
                `
            },
            'dec2025': {
                title: 'December 2025',
                content: `
                    <p><strong>Bottom line:</strong> December hit us with typical year-end slowdown‚Äîwe went negative on net rentals (-2 units) and revenue dropped from $14.4K to $13K. Physical occupancy ticked down slightly but stayed in the mid-70s range.</p>
                    
                    <p><strong>What happened:</strong> Move-outs exceeded move-ins as expected for the season. We maintained economic occupancy discipline, which kept the revenue decline from being worse. The gap between economic and physical stayed positive, meaning we didn't panic and slash rates.</p>
                    
                    <p><strong>The challenge:</strong> Revenue decline is accelerating‚Äîwe're down month-over-month and the trend from our October recovery is reversing. This isn't just seasonality; it's a volume problem combined with timing.</p>
                    
                    <p><strong>Action items:</strong> January typically brings renewed activity. We need aggressive outreach on vacant units, competitive rate positioning against nearby facilities, and tenant retention focus. The negative momentum needs to reverse immediately in Q1.</p>
                `
            },
            'nov2025': {
                title: 'November 2025',
                content: `
                    <p><strong>Bottom line:</strong> Slow month on move-ins (only 5), but we held ground on move-outs and actually saw revenue recovery from October's $13.6K to $14.4K. Physical occupancy stayed relatively flat in the low 70s.</p>
                    
                    <p><strong>What's working:</strong> The revenue bump despite minimal move-in activity suggests rate optimization is paying off. We're collecting more per unit and managing discounts better. Delinquency remained controlled.</p>
                    
                    <p><strong>The concern:</strong> Five move-ins is not sustainable. We need more top-of-funnel activity. This was a recovery month for revenue but not for volume, which means we're still vulnerable if move-outs accelerate.</p>
                    
                    <p><strong>Focus areas:</strong> Marketing needs to drive more leads. Competitive analysis shows we have three major facilities within 7-8 miles‚Äîwe need to understand their promotional activity. The revenue gains bought us time, but we need bodies in units.</p>
                `
            },
            'oct2025': {
                title: 'October 2025',
                content: `
                    <p><strong>Bottom line:</strong> Weakest move-in performance we've seen (only 2 units), but somehow revenue grew from $12.3K in September to $13.6K. Physical occupancy held in low 70s despite the low activity.</p>
                    
                    <p><strong>The paradox:</strong> How did revenue grow with only 2 move-ins? Rate increases on existing tenants and better rent collection. This shows our base is solid, but we cannot rely on rate lifts alone‚Äîwe need volume.</p>
                    
                    <p><strong>What's not working:</strong> Lead generation is clearly broken if we're only converting 2 units. Either the phones aren't ringing, the website isn't converting, or we're losing them at point of contact. This needs diagnosis.</p>
                    
                    <p><strong>Immediate priorities:</strong> Marketing audit. Call tracking implementation. Competitive mystery shopping. The revenue growth despite headwinds is impressive but unsustainable. We're one bad month of move-outs away from trouble.</p>
                `
            },
            'jan2025': {
                title: 'January 2025',
                content: `
                    <p><strong>Context:</strong> This is our YoY comparison baseline‚Äîwhen the facility was running at peak performance. Physical occupancy at 86%, revenue at $16.4K, and 14 move-ins in a single month. This is what good looks like.</p>
                    
                    <p><strong>What we had then:</strong> Strong occupancy created pricing power. High move-in velocity (14 units) meant we could be selective on rates and terms. Revenue was $5K higher than current levels. Operations were dialed in.</p>
                    
                    <p><strong>What changed:</strong> Market conditions shifted, competition potentially increased promotional activity, and we lost momentum on lead generation. The 15-point occupancy drop tells the story‚Äîwe went from 86% to 71% over the year.</p>
                    
                    <p><strong>Path forward:</strong> We know this facility can perform at these levels because it did. The fundamentals haven't changed‚Äîlocation, unit mix, access. This is about execution: marketing, pricing strategy, customer experience, and operational consistency. The benchmark is set; we need to get back to it.</p>
                `
            }
        };

        // Historical data for different periods
        const periodData = {
            'jan2026': {
                name: 'January 2026',
                totalUnits: 165,
                rentedUnits: 118,
                physicalOcc: 71.5,
                economicOcc: 79.1,
                revenue: 11228,
                moveIns: 7,
                moveOuts: 4,
                netRentals: 3,
                delinquentAccounts: 2,
                delinquentAmount: 699,
                compareMonth: 'Dec 2025',
                comparePrevious: {
                    physicalOcc: 69.7,
                    revenue: 12994
                },
                revenueBreakdown: {
                    'Rent': 9341.00,
                    'Tenant Protection Fee': 942.00,
                    'Auction Fee': 630.50,
                    'Late Fee': 140.00,
                    'Admin Fee': 58.00,
                    'Administrative Fee': 58.00,
                    'Setup Fee': 58.00
                },
                highlights: [
                    {
                        type: 'critical',
                        icon: '‚ö†Ô∏è',
                        title: 'Occupancy Decline from Peak',
                        content: 'Physical occupancy dropped to 71.5% from 86.1% in January 2025, representing a loss of 24 rented units. This significant decline requires immediate attention on marketing and leasing efforts.'
                    },
                    {
                        type: 'success',
                        icon: '‚úÖ',
                        title: 'Strong Revenue Management',
                        content: 'Despite lower physical occupancy, economic occupancy at 79.1% shows a +7.6 point premium, indicating effective rate optimization and strong collections discipline.'
                    },
                    {
                        type: 'success',
                        icon: 'üí∞',
                        title: 'Excellent Collections Performance',
                        content: 'Only 2 accounts (1.7% of tenants) are 31+ days delinquent, totaling $699. This is well below the 3% industry threshold.'
                    },
                    {
                        type: 'info',
                        icon: 'üìä',
                        title: 'Positive Net Growth This Month',
                        content: 'January saw 7 move-ins vs 4 move-outs for a net gain of +3 units. This positive momentum should be accelerated through enhanced marketing.'
                    },
                    {
                        type: 'warning',
                        icon: 'üéØ',
                        title: 'Competitive Market Pressure',
                        content: 'StorTrack data shows 11 competitors within 15-minute drive time. Generations Self Storage (0.7 miles away, 29,277 sq ft) is the closest competitor.'
                    },
                    {
                        type: 'warning',
                        icon: 'üõ°Ô∏è',
                        title: 'Tenant Protection Below Target',
                        content: '87 of 118 rented units (73.7%) have active tenant protection plans, generating ancillary revenue of $942 this month (8.4% of total revenue). Need to enroll 31 more tenants to reach 75% industry standard.'
                    },
                    {
                        type: 'success',
                        icon: 'üí≥',
                        title: 'Strong Autopay Enrollment',
                        content: '83.5% of tenants are enrolled in recurring billing/autopay, well above the 75% industry benchmark. This drives predictable cash flow and reduces delinquency risk.'
                    }
                ]
            },
            'dec2025': {
                name: 'December 2025',
                totalUnits: 165,
                rentedUnits: 115,
                physicalOcc: 69.7,
                economicOcc: 74.8,
                revenue: 12994,
                moveIns: 4,
                moveOuts: 5,
                netRentals: -1,
                delinquentAccounts: 'N/A',
                delinquentAmount: 'N/A',
                compareMonth: 'Nov 2025',
                comparePrevious: {
                    physicalOcc: 70.9,
                    revenue: 14427
                },
                revenueBreakdown: {
                    'Rent': 10799.50,
                    'Tenant Protection Fee': 1101.00,
                    'Utilities': 693.11,
                    'Auction Fee': 174.60,
                    'Won An Auction': 87.30,
                    'Late Fee': 80.00,
                    'Setup Fee': 29.00,
                    'Reservation': 29.00
                },
                highlights: [
                    {
                        type: 'warning',
                        icon: '‚ö†Ô∏è',
                        title: 'Negative Net Rentals',
                        content: 'December ended with -1 net rentals (4 move-ins vs 5 move-outs), continuing a concerning trend of declining occupancy through Q4 2025.'
                    },
                    {
                        type: 'critical',
                        icon: 'üìâ',
                        title: 'Revenue Decline Accelerating',
                        content: 'Revenue dropped to $12,994, down 9.9% from November ($14,427). This marks the third consecutive month of revenue decline.'
                    },
                    {
                        type: 'success',
                        icon: '‚úÖ',
                        title: 'Positive Econ-Physical Gap Maintained',
                        content: 'Economic occupancy at 74.8% remains 5.1 points above physical occupancy (69.7%), showing continued rate discipline despite volume challenges.'
                    },
                    {
                        type: 'warning',
                        icon: 'üéØ',
                        title: 'Year-End Slowdown',
                        content: 'December traditionally sees slower move-in activity due to holidays. The 4 move-ins represent seasonal softness typical for the storage industry.'
                    },
                    {
                        type: 'info',
                        icon: 'üìä',
                        title: 'Occupancy Near Year Low',
                        content: 'Physical occupancy at 69.7% is approaching the yearly low, down from 70.9% in November. Marketing efforts needed for Q1 2026 push.'
                    }
                ]
            },
            'nov2025': {
                name: 'November 2025',
                totalUnits: 165,
                rentedUnits: 117,
                physicalOcc: 70.9,
                economicOcc: 75.3,
                revenue: 14427,
                moveIns: 3,
                moveOuts: 4,
                netRentals: -1,
                delinquentAccounts: 'N/A',
                delinquentAmount: 'N/A',
                compareMonth: 'Oct 2025',
                comparePrevious: {
                    physicalOcc: 70.5,
                    revenue: 13574
                },
                revenueBreakdown: {
                    'Rent': 12948.00,
                    'Tenant Protection Fee': 1023.00,
                    'Late Fee': 160.00,
                    'Setup Fee': 116.00,
                    'Auction Fee': 100.00,
                    'Pre Lien Fee': 60.00,
                    'Auction Listing Fee': 20.00
                },
                highlights: [
                    {
                        type: 'warning',
                        icon: '‚ö†Ô∏è',
                        title: 'Slow Move-In Activity',
                        content: 'Only 3 move-ins in November represents one of the weakest months of the year. Seasonal factors and marketing gaps likely contributing.'
                    },
                    {
                        type: 'success',
                        icon: '‚úÖ',
                        title: 'Revenue Recovery from October',
                        content: 'Revenue improved to $14,427, up 6.3% from October ($13,574), showing some positive momentum despite occupancy challenges.'
                    },
                    {
                        type: 'info',
                        icon: 'üìä',
                        title: 'Stable Occupancy Quarter-End',
                        content: 'Physical occupancy held relatively steady at 70.9%, up slightly from October (70.5%). Maintaining stability entering holiday season.'
                    },
                    {
                        type: 'success',
                        icon: 'üí∞',
                        title: 'Strong Rate Position',
                        content: 'Economic occupancy gap of +4.4 points indicates healthy average rent per unit despite lower physical occupancy.'
                    },
                    {
                        type: 'warning',
                        icon: 'üîß',
                        title: 'Auction Activity Period',
                        content: 'Multiple units moving through auction process during this period, with cleanouts and unit turnover impacting available inventory.'
                    }
                ]
            },
            'oct2025': {
                name: 'October 2025',
                totalUnits: 166,
                rentedUnits: 117,
                physicalOcc: 70.5,
                economicOcc: 74.9,
                revenue: 13574,
                moveIns: 2,
                moveOuts: 4,
                netRentals: -2,
                delinquentAccounts: 'N/A',
                delinquentAmount: 'N/A',
                compareMonth: 'Sep 2025',
                comparePrevious: {
                    physicalOcc: 72.7,
                    revenue: 12321
                },
                revenueBreakdown: {
                    'Rent': 11701.50,
                    'Tenant Protection Fee': 1128.00,
                    'Utilities': 396.88,
                    'Late Fee': 160.00,
                    'Pre Lien Fee': 60.00,
                    'Auction Fee': 50.00,
                    'Administrative Fee': 29.00,
                    'Auction Listing Fee': 20.00,
                    'Setup Fee': 29.00
                },
                highlights: [
                    {
                        type: 'critical',
                        icon: '‚ö†Ô∏è',
                        title: 'Weakest Move-In Month',
                        content: 'Only 2 move-ins in October represents the lowest monthly performance of 2025. Immediate marketing intervention required.'
                    },
                    {
                        type: 'success',
                        icon: 'üí∞',
                        title: 'Revenue Growth Despite Headwinds',
                        content: 'Revenue increased to $13,574, up 10.2% from September ($12,321), demonstrating effective rate management compensating for occupancy decline.'
                    },
                    {
                        type: 'warning',
                        icon: 'üìâ',
                        title: 'Occupancy Continuing Downward',
                        content: 'Physical occupancy dropped to 70.5% from 72.7% in September. The -2 net rentals continues the negative trend from Q3.'
                    },
                    {
                        type: 'info',
                        icon: 'üìä',
                        title: 'Q4 Entry Point',
                        content: 'Entering Q4 with 70.5% occupancy sets challenging baseline for typically slower winter months. Strategic positioning needed.'
                    },
                    {
                        type: 'success',
                        icon: '‚úÖ',
                        title: 'Maintained Yield Premium',
                        content: 'Economic occupancy gap of +4.4 points shows continued pricing strength and collection effectiveness.'
                    }
                ]
            },
            'jan2025': {
                name: 'January 2025',
                totalUnits: 163,
                rentedUnits: 142,
                physicalOcc: 86.1,
                economicOcc: 90.5,
                revenue: 16424,
                moveIns: 14,
                moveOuts: 4,
                netRentals: 10,
                delinquentAccounts: 'N/A',
                delinquentAmount: 'N/A',
                compareMonth: 'Dec 2024',
                comparePrevious: {
                    physicalOcc: 81.0,
                    revenue: 14628
                },
                revenueBreakdown: {
                    'Rent': 13627.50,
                    'Tenant Protection Fee': 1344.00,
                    'Utilities': 413.23,
                    'Won An Auction': 397.70,
                    'Setup Fee': 214.00,
                    'Late Fee': 200.00,
                    'Pre Lien Fee': 150.00,
                    'One-time Credit Card': 34.50,
                    'Admin Fee': 29.00,
                    'Reservation': 29.00,
                    'Auction Listing Fee': 20.00
                },
                highlights: [
                    {
                        type: 'success',
                        icon: 'üéâ',
                        title: 'Exceptional Move-In Performance',
                        content: 'January 2025 delivered 14 move-ins with only 4 move-outs, achieving +10 net rentals - the strongest monthly performance of the year.'
                    },
                    {
                        type: 'success',
                        icon: 'üí∞',
                        title: 'Peak Revenue Achievement',
                        content: 'Revenue reached $16,424, representing 12.3% growth from December 2024 ($14,628). This set the high-water mark for 2025.'
                    },
                    {
                        type: 'success',
                        icon: 'üìà',
                        title: 'Occupancy Peak at 86.1%',
                        content: 'Physical occupancy hit 86.1% with 142 rented units - the facility\'s best performance. Strong demand and effective marketing converged.'
                    },
                    {
                        type: 'success',
                        icon: '‚úÖ',
                        title: 'Excellent Economic Performance',
                        content: 'Economic occupancy at 90.5% with a +4.4 point gap shows exceptional revenue capture. Both volume and yield were optimized.'
                    },
                    {
                        type: 'info',
                        icon: 'üéØ',
                        title: 'Benchmark Period',
                        content: 'This represents the performance target for recovery. All future strategies should aim to return to these metrics.'
                    },
                    {
                        type: 'success',
                        icon: 'üî•',
                        title: 'Strong Market Position',
                        content: 'Facility operating at near-full capacity with healthy demand. Manager rentals and customer conversions both performing well.'
                    }
                ]
            }
        };

        function updateHighlights(highlights) {
            const highlightsContainer = document.getElementById('performance-highlights');
            highlightsContainer.innerHTML = '';
            
            highlights.forEach((highlight, index) => {
                const card = document.createElement('div');
                card.className = `highlight-card ${highlight.type}`;
                card.innerHTML = `
                    <div class="highlight-icon">${highlight.icon}</div>
                    <div class="highlight-title">${highlight.title}</div>
                    <div class="highlight-content">${highlight.content}</div>
                `;
                highlightsContainer.appendChild(card);
            });
        }

        function updateDashboard(periodKey) {
            const data = periodData[periodKey];
            
            // Update period title in highlights section
            document.getElementById('highlights-period').textContent = data.name;
            
            // Update highlights
            updateHighlights(data.highlights);
            
            // Update occupancy metrics in combined card
            const occupancyMetrics = document.querySelectorAll('#occupancy-card .occupancy-metric-value');
            const occupancyTrends = document.querySelectorAll('#occupancy-card .occupancy-metric-trend');
            
            // Physical occupancy
            occupancyMetrics[0].textContent = data.physicalOcc.toFixed(1) + '%';
            const physOccChange = data.physicalOcc - data.comparePrevious.physicalOcc;
            occupancyTrends[0].innerHTML = `${physOccChange >= 0 ? '‚Üë' : '‚Üì'} ${Math.abs(physOccChange).toFixed(1)} pts vs ${data.compareMonth.split(' ')[0]} '${data.compareMonth.split(' ')[1].slice(-2)}`;
            occupancyTrends[0].className = physOccChange >= 0 ? 'occupancy-metric-trend trend-up' : 'occupancy-metric-trend trend-down';
            
            // Economic occupancy
            occupancyMetrics[1].textContent = data.economicOcc.toFixed(1) + '%';
            
            // Gap
            const gap = data.economicOcc - data.physicalOcc;
            occupancyMetrics[2].textContent = (gap >= 0 ? '+' : '') + gap.toFixed(1);
            occupancyMetrics[2].style.color = gap >= 0 ? '#10B981' : '#EF4444';
            occupancyTrends[2].innerHTML = gap >= 0 ? 'Strong yield' : 'Weak yield';
            
            // Update revenue
            document.querySelector('#revenue-card .kpi-value').textContent = '$' + data.revenue.toLocaleString();
            const revChange = data.revenue - data.comparePrevious.revenue;
            const revChangePercent = ((revChange / data.comparePrevious.revenue) * 100).toFixed(1);
            const revTrend = document.querySelector('#revenue-card .kpi-trend');
            revTrend.innerHTML = `${revChange >= 0 ? '‚Üë' : '‚Üì'} $${Math.abs(revChange).toLocaleString()} (${revChangePercent >= 0 ? '+' : ''}${revChangePercent}%) vs ${data.compareMonth}`;
            revTrend.className = revChange >= 0 ? 'kpi-trend trend-up' : 'kpi-trend trend-down';
            
            // Update revenue badge
            const revBadge = document.querySelector('#revenue-card .status-badge');
            if (revChange >= 0) {
                revBadge.className = 'status-badge status-good';
                revBadge.textContent = 'Growing';
            } else if (revChangePercent > -10) {
                revBadge.className = 'status-badge status-warning';
                revBadge.textContent = 'Watch';
            } else {
                revBadge.className = 'status-badge status-critical';
                revBadge.textContent = 'Below Target';
            }
            
            // Update month-over-month comparison
            const momChange = data.revenue - data.comparePrevious.revenue;
            const momChangePercent = ((momChange / data.comparePrevious.revenue) * 100).toFixed(1);
            const momElement = document.getElementById('mom-change');
            momElement.textContent = `${momChange >= 0 ? '+' : ''}$${Math.abs(momChange).toLocaleString()} (${momChangePercent >= 0 ? '+' : ''}${momChangePercent}%)`;
            momElement.className = momChange >= 0 ? 'comparison-value trend-up' : 'comparison-value trend-down';
            
            // Update prior month value
            document.getElementById('prior-month-value').textContent = '$' + data.comparePrevious.revenue.toLocaleString();
            
            // Update net rentals (now 4th card after the combined occupancy)
            document.querySelector('.kpi-card:nth-child(4) .kpi-value').textContent = (data.netRentals >= 0 ? '+' : '') + data.netRentals;
            document.querySelector('.kpi-card:nth-child(4) .kpi-trend').textContent = `${data.moveIns} move-ins, ${data.moveOuts} move-outs`;
            
            // Update net rentals badge
            const netBadge = document.querySelector('.kpi-card:nth-child(4) .status-badge');
            if (data.netRentals > 0) {
                netBadge.className = 'status-badge status-good';
                netBadge.textContent = 'Growth';
            } else if (data.netRentals === 0) {
                netBadge.className = 'status-badge status-warning';
                netBadge.textContent = 'Stable';
            } else {
                netBadge.className = 'status-badge status-critical';
                netBadge.textContent = 'Decline';
            }
            
            // Update delinquency (now 3rd card)
            if (data.delinquentAccounts !== 'N/A') {
                const delinqPercent = ((data.delinquentAccounts / data.rentedUnits) * 100).toFixed(1);
                document.querySelector('.kpi-card:nth-child(3) .kpi-value').textContent = delinqPercent + '%';
                document.querySelector('.kpi-card:nth-child(3) .kpi-trend').innerHTML = `${data.delinquentAccounts} accounts | $${data.delinquentAmount.toLocaleString()} total<br><span style="font-size: 12px; color: #8B92A0;">7 total past due (any age)</span>`;
                
                // Update delinquency badge based on percentage
                const delinqBadge = document.querySelector('.kpi-card:nth-child(3) .status-badge');
                if (parseFloat(delinqPercent) < 3) {
                    delinqBadge.className = 'status-badge status-good';
                    delinqBadge.textContent = 'Good';
                } else if (parseFloat(delinqPercent) <= 5) {
                    delinqBadge.className = 'status-badge status-warning';
                    delinqBadge.textContent = 'Watch';
                } else {
                    delinqBadge.className = 'status-badge status-critical';
                    delinqBadge.textContent = 'Action Needed';
                }
            } else {
                document.querySelector('.kpi-card:nth-child(3) .kpi-value').textContent = 'N/A';
                document.querySelector('.kpi-card:nth-child(3) .kpi-trend').innerHTML = 'Data not available for this period';
            }
            
            // Update header period
            const metaSpan = document.querySelector('.facility-meta');
            metaSpan.innerHTML = `
                <span>üìç 10910 Highway 57, Vancleave, MS 39565</span>
                <span>|</span>
                <span>üè¢ FITZ Portfolio</span>
                <span>|</span>
                <span>üìÖ ${data.name}</span>
                <span>|</span>
                <span>Generated: February 1, 2026</span>
            `;
        }

        // Period selector event listener
        document.getElementById('period-select').addEventListener('change', function() {
            currentPeriod = this.value;
            updateDashboard(this.value);
        });

        // Initialize with current period on load
        document.addEventListener('DOMContentLoaded', function() {
            updateDashboard('jan2026');
            initMiniRevenueChart();
        });

        // Reinitialize chart on window resize for mobile responsiveness
        let resizeTimeout;
        window.addEventListener('resize', function() {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(function() {
                if (miniRevenueChart) {
                    initMiniRevenueChart();
                }
            }, 250);
        });

        // Modal functions
        function openRevenueModal() {
            const data = periodData[currentPeriod];
            const modal = document.getElementById('revenueModal');
            
            // Update modal title
            document.getElementById('modal-period-subtitle').textContent = `${data.name} - Detailed Revenue Analysis`;
            
            // Populate revenue breakdown table
            const revenueTable = document.getElementById('revenue-table');
            let tableHTML = '';
            let total = 0;
            
            for (const [category, amount] of Object.entries(data.revenueBreakdown)) {
                tableHTML += `
                    <tr>
                        <td>${category}</td>
                        <td>$${amount.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                    </tr>
                `;
                total += amount;
            }
            
            tableHTML += `
                <tr>
                    <td>Total Collected</td>
                    <td>$${total.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                </tr>
            `;
            
            revenueTable.innerHTML = tableHTML;
            
            // Populate comparison table
            const comparisonTable = document.getElementById('comparison-table');
            const prevRevenue = data.comparePrevious.revenue;
            const change = data.revenue - prevRevenue;
            const changePercent = ((change / prevRevenue) * 100).toFixed(1);
            const changeColor = change >= 0 ? '#10B981' : '#EF4444';
            const changeIcon = change >= 0 ? '‚Üë' : '‚Üì';
            
            comparisonTable.innerHTML = `
                <tr>
                    <td>Current Period (${data.name})</td>
                    <td>$${data.revenue.toLocaleString()}</td>
                </tr>
                <tr>
                    <td>Previous Period (${data.compareMonth})</td>
                    <td>$${prevRevenue.toLocaleString()}</td>
                </tr>
                <tr>
                    <td>Change</td>
                    <td style="color: ${changeColor};">${changeIcon} $${Math.abs(change).toLocaleString()} (${changePercent}%)</td>
                </tr>
                <tr>
                    <td>Average per Rented Unit</td>
                    <td>$${(data.revenue / data.rentedUnits).toFixed(2)}</td>
                </tr>
            `;
            
            modal.style.display = 'block';
        }

        function closeRevenueModal() {
            document.getElementById('revenueModal').style.display = 'none';
        }

        // Manager Narrative Modal Functions
        function openManagerNarrative() {
            const modal = document.getElementById('narrativeModal');
            const narrative = managerNarratives[currentPeriod];
            
            document.getElementById('narrative-period-subtitle').textContent = narrative.title;
            document.getElementById('narrative-content').innerHTML = narrative.content;
            
            modal.style.display = 'block';
        }

        function closeManagerNarrative() {
            document.getElementById('narrativeModal').style.display = 'none';
        }

        // Close modal when clicking outside of it
        window.onclick = function(event) {
            const revenueModal = document.getElementById('revenueModal');
            const competitorModal = document.getElementById('competitorModal');
            const occupancyModal = document.getElementById('occupancyModal');
            const narrativeModal = document.getElementById('narrativeModal');
            
            if (event.target == revenueModal) {
                closeRevenueModal();
            } else if (event.target == competitorModal) {
                closeCompetitorModal();
            } else if (event.target == occupancyModal) {
                closeOccupancyModal();
            } else if (event.target == narrativeModal) {
                closeManagerNarrative();
            }
        }

        // Close modal on Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeRevenueModal();
                closeCompetitorModal();
                closeOccupancyModal();
                closeManagerNarrative();
            }
        });

        // Competitor Modal Functions
        function openCompetitorModal(competitorId) {
            const competitor = competitorData[competitorId];
            const modal = document.getElementById('competitorModal');
            
            document.getElementById('competitor-name-title').textContent = competitor.name;
            document.getElementById('competitor-subtitle').textContent = `${competitor.distance} | ${competitor.size} | Class ${competitor.class}`;
            
            let detailsHTML = `
                <div class="revenue-category">Facility Profile</div>
                <table class="revenue-breakdown-table">
                    <tr>
                        <td>Distance from Vancleave</td>
                        <td>${competitor.distance}</td>
                    </tr>
                    <tr>
                        <td>Total Rentable Space</td>
                        <td>${competitor.size}</td>
                    </tr>
                    <tr>
                        <td>Facility Class</td>
                        <td>Class ${competitor.class}</td>
                    </tr>
                    <tr>
                        <td>Estimated Unit Count</td>
                        <td>${competitor.units}</td>
                    </tr>
                    <tr>
                        <td>Rate Volatility (30 days)</td>
                        <td>${competitor.volatility}</td>
                    </tr>
                    <tr>
                        <td>Location</td>
                        <td>${competitor.address}</td>
                    </tr>
                </table>
                
                <div class="revenue-category" style="margin-top: 25px;">Market Intelligence</div>
                <div style="background: rgba(0, 188, 212, 0.1); border-left: 3px solid #00BCD4; padding: 15px; margin-top: 10px; border-radius: 5px;">
                    ${competitor.insights.map(insight => `<p style="margin: 8px 0; color: #E5E7EB; font-size: 14px;">${insight}</p>`).join('')}
                </div>
                
                <div class="revenue-category" style="margin-top: 25px;">Average Market Rates</div>
                <table class="revenue-breakdown-table">
                    <tr>
                        <td>5x5 Climate Controlled</td>
                        <td>${competitor.rates['5x5']}</td>
                    </tr>
                    <tr>
                        <td>10x10 Regular</td>
                        <td>${competitor.rates['10x10']}</td>
                    </tr>
                    <tr>
                        <td>10x20 Climate Controlled</td>
                        <td>${competitor.rates['10x20']}</td>
                    </tr>
                </table>
                
                <p style="margin-top: 20px; color: #8B92A0; font-size: 13px; text-align: center;">
                    Data from StorTrack Competitive Intelligence Platform
                </p>
            `;
            
            document.getElementById('competitor-details').innerHTML = detailsHTML;
            modal.style.display = 'block';
        }

        function closeCompetitorModal() {
            document.getElementById('competitorModal').style.display = 'none';
        }

        // Occupancy Modal Functions
        function openOccupancyModal() {
            const modal = document.getElementById('occupancyModal');
            const data = periodData[currentPeriod];
            const unitMix = unitMixData['jan2026']; // We only have current data
            
            document.getElementById('occupancy-period-subtitle').textContent = `${data.name} - Unit Mix Analysis`;
            
            // Populate unit mix table
            const tbody = document.getElementById('unit-mix-tbody');
            let tableHTML = '';
            let totals = { total: 0, occupied: 0, vacant: 0 };
            
            unitMix.forEach(unit => {
                totals.total += unit.total;
                totals.occupied += unit.occupied;
                totals.vacant += unit.vacant;
                
                const occClass = unit.occupancy >= 75 ? 'style="color: #10B981;"' : unit.occupancy >= 60 ? 'style="color: #F59E0B;"' : 'style="color: #EF4444;"';
                
                tableHTML += `
                    <tr>
                        <td class="unit-type">${unit.type}</td>
                        <td>${unit.total}</td>
                        <td>${unit.occupied}</td>
                        <td>${unit.vacant}</td>
                        <td class="occ-percent" ${occClass}>${unit.occupancy.toFixed(1)}%</td>
                    </tr>
                `;
            });
            
            tableHTML += `
                <tr style="border-top: 2px solid rgba(218, 165, 32, 0.5); font-weight: 600;">
                    <td class="unit-type">TOTAL</td>
                    <td>${totals.total}</td>
                    <td>${totals.occupied}</td>
                    <td>${totals.vacant}</td>
                    <td class="occ-percent" style="color: #DAA520;">${((totals.occupied / totals.total) * 100).toFixed(1)}%</td>
                </tr>
            `;
            
            tbody.innerHTML = tableHTML;
            modal.style.display = 'block';
        }

        function closeOccupancyModal() {
            document.getElementById('occupancyModal').style.display = 'none';
        }

        // Mini Revenue Chart (on Revenue KPI card)
        function initMiniRevenueChart() {
            const ctx = document.getElementById('miniRevenueChart');
            
            if (miniRevenueChart) {
                miniRevenueChart.destroy();
            }
            
            // Detect mobile
            const isMobile = window.innerWidth <= 768;
            
            miniRevenueChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: revenueHistory.map(item => item.month),
                    datasets: [{
                        label: 'Revenue',
                        data: revenueHistory.map(item => item.revenue),
                        borderColor: '#DAA520',
                        backgroundColor: 'rgba(218, 165, 32, 0.15)',
                        borderWidth: 2.5,
                        fill: true,
                        tension: 0.3,
                        pointRadius: isMobile ? 3 : 4,
                        pointHoverRadius: isMobile ? 5 : 6,
                        pointBackgroundColor: '#DAA520',
                        pointBorderColor: '#FFFFFF',
                        pointBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            enabled: true,
                            backgroundColor: '#1a1d23',
                            titleColor: '#DAA520',
                            bodyColor: '#E5E7EB',
                            borderColor: '#DAA520',
                            borderWidth: 1,
                            padding: 10,
                            displayColors: false,
                            callbacks: {
                                title: function(context) {
                                    return context[0].label;
                                },
                                label: function(context) {
                                    return '$' + context.parsed.y.toLocaleString();
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            display: true,
                            beginAtZero: false,
                            ticks: {
                                color: '#8B92A0',
                                font: {
                                    size: isMobile ? 9 : 11
                                },
                                callback: function(value) {
                                    return '$' + (value / 1000).toFixed(0) + 'k';
                                },
                                padding: 5,
                                maxTicksLimit: isMobile ? 5 : 6
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.05)',
                                drawBorder: false
                            }
                        },
                        x: {
                            display: true,
                            ticks: {
                                color: '#8B92A0',
                                font: {
                                    size: isMobile ? 8 : 10
                                },
                                maxRotation: 45,
                                minRotation: 45,
                                autoSkip: isMobile ? true : false,
                                maxTicksLimit: isMobile ? 6 : 12
                            },
                            grid: {
                                display: false,
                                drawBorder: false
                            }
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    }
                }
            });
        }
    </script>
</body>
</html>
